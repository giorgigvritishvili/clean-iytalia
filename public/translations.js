const translations = {
  en: {
    nav: {
      services: "Services",
      book: "Book Now",
      faq: "FAQ",
      contact: "Contact"
    },
    hero: {
      title: "Professional Cleaning Services in Italy",
      subtitle: "Trusted, reliable cleaning for your home or business. Serving Rome and Milan.",
      cta: "Book Now",
      feature1: "Trusted Professionals",
      feature2: "Flexible Scheduling",
      feature3: "Secure Payment"
    },
    services: {
      title: "Our Services",
      subtitle: "Choose the perfect cleaning service for your needs",
      regular: "Regular Cleaning",
      regularDesc: "Weekly or bi-weekly cleaning for homes",
      onetime: "One-time Cleaning",
      onetimeDesc: "Single deep clean for any occasion",
      deep: "Deep Cleaning",
      deepDesc: "Thorough cleaning including hard-to-reach areas",
      move: "Move-in/Move-out",
      moveDesc: "Complete cleaning for moving in or out",
      lastminute: "Last-minute Cleaning",
      lastminuteDesc: "Urgent cleaning service within 24 hours",
      business: "Business Cleaning",
      businessDesc: "Professional cleaning for offices and businesses",
      perHour: "/hour"
    },
    booking: {
      title: "Book Your Cleaning",
      subtitle: "Fill in the details below to schedule your service",
      step1: "Select Service & Location",
      step2: "Select Date & Time",
      step3: "Your Details",
      step4: "Review & Pay",
      service: "Service Type",
      selectService: "Select a service",
      city: "City",
      selectCity: "Select a city",
      hours: "Hours",
      cleaners: "Cleaners",
      date: "Date",
      time: "Time",
      selectDate: "Select a date first",
      name: "Full Name",
      email: "Email",
      phone: "Phone",
      address: "Address",
      notes: "Special Instructions (Optional)",
      next: "Next",
      back: "Back",
      total: "Total:",
      paymentNotice: "Your card will be authorized but not charged until your booking is confirmed by our team.",
      confirm: "Confirm Booking"
    },
    success: {
      title: "Booking Submitted!",
      message: "Your booking is pending confirmation. We will notify you via email once it's confirmed.",
      payment: "Your payment has been authorized and will only be charged upon confirmation.",
      newBooking: "Make Another Booking"
    },
    faq: {
      title: "Frequently Asked Questions",
      q1: "How does the booking process work?",
      a1: "Simply select your service, choose a date and time, enter your details, and complete the payment authorization. Your card will only be charged once we confirm your booking.",
      q2: "What areas do you serve?",
      a2: "We currently serve Rome and Milan. More cities coming soon!",
      q3: "What payment methods do you accept?",
      a3: "We accept all major credit and debit cards through our secure Stripe payment system.",
      q4: "Can I cancel my booking?",
      a4: "If your booking hasn't been confirmed yet, no charge will be made. For confirmed bookings, please contact us at least 24 hours in advance."
    },
    contact: {
      title: "Contact Us",
      subtitle: "Have questions? We're here to help!",
      email: "Email",
      phone: "Phone",
      whatsapp: "Chat with us"
    },
    footer: {
      privacy: "Privacy Policy",
      terms: "Terms of Service",
      cookies: "Cookie Policy"
    },
    cookies: {
      message: "We use cookies to improve your experience. By continuing to use this site, you agree to our use of cookies.",
      accept: "Accept",
      decline: "Decline"
    },
    admin: {
      login: {
        title: "Admin Dashboard",
        subtitle: "Clean Italia",
        username: "Username",
        password: "Password",
        loginBtn: "Login",
        hint: "Contact administrator for credentials"
      },
      nav: {
        overview: "Overview",
        bookings: "Bookings",
        cities: "Cities",
        services: "Services",
        backToSite: "Back to Site",
        logout: "Logout"
      },
      overview: {
        title: "Overview",
        totalBookings: "Total Bookings",
        pending: "Pending",
        confirmed: "Confirmed",
        revenue: "Total Revenue",
        recentBookings: "Recent Bookings"
      },
      bookings: {
        title: "All Bookings",
        filterAll: "All Status",
        pending: "Pending",
        confirmed: "Confirmed",
        cancelled: "Cancelled",
        completed: "Completed",
        id: "ID",
        customer: "Customer",
        contact: "Contact",
        service: "Service",
        city: "City",
        dateTime: "Date & Time",
        duration: "Duration",
        amount: "Amount",
        payment: "Payment",
        status: "Status",
        actions: "Actions",
        noBookings: "No bookings found",
        details: "Booking Details",
        bookingId: "Booking ID",
        customerName: "Customer Name",
        email: "Email",
        phone: "Phone",
        address: "Address",
        date: "Date",
        time: "Time",
        hours: "Duration",
        cleaners: "Cleaners",
        totalAmount: "Total Amount",
        paymentStatus: "Payment Status",
        paymentIntentId: "Payment Intent ID",
        specialInstructions: "Special Instructions",
        reject: "Reject",
        confirmCharge: "Confirm & Charge",
        email: "Email",
        call: "Call",
        whatsapp: "WhatsApp"
      },
      cities: {
        title: "Manage Cities",
        addCity: "Add City",
        nameEn: "City Name (English)",
        nameIt: "City Name (Italian)",
        workingHoursStart: "Working Hours Start",
        workingHoursEnd: "Working Hours End",
        workingDays: "Working Days",
        mon: "Mon",
        tue: "Tue",
        wed: "Wed",
        thu: "Thu",
        fri: "Fri",
        sat: "Sat",
        sun: "Sun",
        cancel: "Cancel",
        add: "Add City"
      },
      services: {
        title: "Manage Services",
        nameIt: "IT:",
        perHour: "/hour"
      },
      alerts: {
        invalidCredentials: "Invalid credentials",
        loginFailed: "Login failed. Please try again.",
        confirmBooking: "Confirm this booking and charge the customer?",
        bookingConfirmed: "Booking confirmed successfully!",
        confirmFailed: "Failed to confirm booking. Please try again.",
        rejectBooking: "Reject this booking? The payment authorization will be released.",
        bookingRejected: "Booking rejected. Payment released.",
        rejectFailed: "Failed to reject booking. Please try again.",
        fillRequired: "Please fill in all required fields",
        addCityFailed: "Failed to add city. Please try again.",
        updateFailed: "Failed to update. Please try again."
      }
    }
  },
  it: {
    nav: {
      services: "Servizi",
      book: "Prenota Ora",
      faq: "FAQ",
      contact: "Contatti"
    },
    hero: {
      title: "Servizi di Pulizia Professionali in Italia",
      subtitle: "Pulizia affidabile per la tua casa o azienda. Serviamo Roma e Milano.",
      cta: "Prenota Ora",
      feature1: "Professionisti Affidabili",
      feature2: "Orari Flessibili",
      feature3: "Pagamento Sicuro"
    },
    services: {
      title: "I Nostri Servizi",
      subtitle: "Scegli il servizio di pulizia perfetto per le tue esigenze",
      regular: "Pulizia Regolare",
      regularDesc: "Pulizia settimanale o bisettimanale per case",
      onetime: "Pulizia Una Tantum",
      onetimeDesc: "Una pulizia approfondita per qualsiasi occasione",
      deep: "Pulizia Profonda",
      deepDesc: "Pulizia accurata incluse le aree difficili",
      move: "Trasloco",
      moveDesc: "Pulizia completa per traslochi",
      lastminute: "Pulizia Last Minute",
      lastminuteDesc: "Servizio urgente entro 24 ore",
      business: "Pulizia Uffici",
      businessDesc: "Pulizia professionale per uffici e aziende",
      perHour: "/ora"
    },
    booking: {
      title: "Prenota la Tua Pulizia",
      subtitle: "Compila i dettagli per programmare il tuo servizio",
      step1: "Seleziona Servizio e Località",
      step2: "Seleziona Data e Ora",
      step3: "I Tuoi Dati",
      step4: "Riepilogo e Pagamento",
      service: "Tipo di Servizio",
      selectService: "Seleziona un servizio",
      city: "Città",
      selectCity: "Seleziona una città",
      hours: "Ore",
      cleaners: "Addetti",
      date: "Data",
      time: "Ora",
      selectDate: "Seleziona prima una data",
      name: "Nome Completo",
      email: "Email",
      phone: "Telefono",
      address: "Indirizzo",
      notes: "Istruzioni Speciali (Opzionale)",
      next: "Avanti",
      back: "Indietro",
      total: "Totale:",
      paymentNotice: "La tua carta sarà autorizzata ma non addebitata fino alla conferma della prenotazione.",
      confirm: "Conferma Prenotazione"
    },
    success: {
      title: "Prenotazione Inviata!",
      message: "La tua prenotazione è in attesa di conferma. Ti avviseremo via email.",
      payment: "Il pagamento è stato autorizzato e verrà addebitato solo dopo la conferma.",
      newBooking: "Nuova Prenotazione"
    },
    faq: {
      title: "Domande Frequenti",
      q1: "Come funziona il processo di prenotazione?",
      a1: "Seleziona il servizio, scegli data e ora, inserisci i tuoi dati e completa l'autorizzazione. La carta verrà addebitata solo dopo la conferma.",
      q2: "Quali zone servite?",
      a2: "Attualmente serviamo Roma e Milano. Altre città in arrivo!",
      q3: "Quali metodi di pagamento accettate?",
      a3: "Accettiamo tutte le principali carte di credito e debito tramite Stripe.",
      q4: "Posso cancellare la prenotazione?",
      a4: "Se non è stata confermata, nessun addebito. Per prenotazioni confermate, contattaci almeno 24 ore prima."
    },
    contact: {
      title: "Contattaci",
      subtitle: "Hai domande? Siamo qui per aiutarti!",
      email: "Email",
      phone: "Telefono",
      whatsapp: "Chatta con noi"
    },
    footer: {
      privacy: "Privacy Policy",
      terms: "Termini di Servizio",
      cookies: "Cookie Policy"
    },
    cookies: {
      message: "Utilizziamo i cookie per migliorare la tua esperienza. Continuando a usare il sito, accetti l'uso dei cookie.",
      accept: "Accetta",
      decline: "Rifiuta"
    },
    admin: {
      login: {
        title: "Pannello di Amministrazione",
        subtitle: "Clean Italia",
        username: "Nome utente",
        password: "Password",
        loginBtn: "Accedi",
        hint: "Contatta l'amministratore per le credenziali"
      },
      nav: {
        overview: "Panoramica",
        bookings: "Prenotazioni",
        cities: "Città",
        services: "Servizi",
        backToSite: "Torna al Sito",
        logout: "Esci"
      },
      overview: {
        title: "Panoramica",
        totalBookings: "Prenotazioni Totali",
        pending: "In Attesa",
        confirmed: "Confermate",
        revenue: "Ricavi Totali",
        recentBookings: "Prenotazioni Recenti"
      },
      bookings: {
        title: "Tutte le Prenotazioni",
        filterAll: "Tutti gli Stati",
        pending: "In Attesa",
        confirmed: "Confermate",
        cancelled: "Cancellate",
        completed: "Completate",
        id: "ID",
        customer: "Cliente",
        contact: "Contatto",
        service: "Servizio",
        city: "Città",
        dateTime: "Data e Ora",
        duration: "Durata",
        amount: "Importo",
        payment: "Pagamento",
        status: "Stato",
        actions: "Azioni",
        noBookings: "Nessuna prenotazione trovata",
        details: "Dettagli Prenotazione",
        bookingId: "ID Prenotazione",
        customerName: "Nome Cliente",
        email: "Email",
        phone: "Telefono",
        address: "Indirizzo",
        date: "Data",
        time: "Ora",
        hours: "Durata",
        cleaners: "Addetti",
        totalAmount: "Importo Totale",
        paymentStatus: "Stato Pagamento",
        paymentIntentId: "ID Intento Pagamento",
        specialInstructions: "Istruzioni Speciali",
        reject: "Rifiuta",
        confirmCharge: "Conferma e Addebita",
        email: "Email",
        call: "Chiama",
        whatsapp: "WhatsApp"
      },
      cities: {
        title: "Gestisci Città",
        addCity: "Aggiungi Città",
        nameEn: "Nome Città (Inglese)",
        nameIt: "Nome Città (Italiano)",
        workingHoursStart: "Orario Inizio Lavoro",
        workingHoursEnd: "Orario Fine Lavoro",
        workingDays: "Giorni Lavorativi",
        mon: "Lun",
        tue: "Mar",
        wed: "Mer",
        thu: "Gio",
        fri: "Ven",
        sat: "Sab",
        sun: "Dom",
        cancel: "Annulla",
        add: "Aggiungi Città"
      },
      services: {
        title: "Gestisci Servizi",
        nameIt: "IT:",
        perHour: "/ora"
      },
      alerts: {
        invalidCredentials: "Credenziali non valide",
        loginFailed: "Accesso fallito. Riprova.",
        confirmBooking: "Confermare questa prenotazione e addebitare il cliente?",
        bookingConfirmed: "Prenotazione confermata con successo!",
        confirmFailed: "Impossibile confermare la prenotazione. Riprova.",
        rejectBooking: "Rifiutare questa prenotazione? L'autorizzazione di pagamento sarà rilasciata.",
        bookingRejected: "Prenotazione rifiutata. Pagamento rilasciato.",
        rejectFailed: "Impossibile rifiutare la prenotazione. Riprova.",
        fillRequired: "Compila tutti i campi obbligatori",
        addCityFailed: "Impossibile aggiungere la città. Riprova.",
        updateFailed: "Aggiornamento fallito. Riprova."
      }
    }
  }
};

let currentLanguage = localStorage.getItem('language') || 'en';

function setLanguage(lang) {
  currentLanguage = lang;
  localStorage.setItem('language', lang);
  
  // Update language switcher buttons
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.classList.toggle('active', btn.dataset.lang === lang);
  });
  
  document.querySelectorAll('[data-i18n]').forEach(element => {
    const key = element.getAttribute('data-i18n');
    const keys = key.split('.');
    let value = translations[lang];
    
    for (const k of keys) {
      if (value && value[k]) {
        value = value[k];
      } else {
        value = null;
        break;
      }
    }
    
    if (value) {
      element.textContent = value;
    }
  });
}

function toggleLanguage() {
  const newLang = currentLanguage === 'en' ? 'it' : 'en';
  setLanguage(newLang);
}

document.addEventListener('DOMContentLoaded', () => {
  setLanguage(currentLanguage);
});
